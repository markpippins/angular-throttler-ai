@if(isLoading()) {
  <div class="text-center py-8 text-[rgb(var(--color-text-subtle))]">Loading...</div>
} @else if (searchError(); as error) {
  <div class="text-center py-8 text-[rgb(var(--color-danger-text))] bg-red-50 dark:bg-red-900/20 p-4 rounded-md">
    <h3 class="font-semibold text-lg">{{ error.message }}</h3>
    @if (error.isConfigError) {
      <p class="mt-2 text-sm text-[rgb(var(--color-text-muted))]">
        To enable this feature, a server administrator must provide a Google API Key and Search Engine ID.
      </p>
      <a href="https://console.cloud.google.com/" target="_blank" rel="noopener noreferrer" class="mt-4 inline-block px-4 py-2 bg-[rgb(var(--color-accent-solid-bg))] text-[rgb(var(--color-text-inverted))] rounded-md hover:bg-[rgb(var(--color-accent-solid-bg-hover))] text-sm font-semibold">
        Go to Google Cloud Console
      </a>
    }
  </div>
} @else if (results(); as res) {
  <div class="space-y-4">
    @for (result of res; track result.link) {
      <div class="group relative pr-8">
        <a [href]="result.link" target="_blank" class="text-blue-500 dark:text-blue-400 group-hover:underline text-base">{{ result.title }}</a>
        <div class="text-green-700 dark:text-green-500 text-xs">{{ result.displayLink }}</div>
        <p class="text-[rgb(var(--color-text-muted))] mt-1">{{ result.snippet }}</p>
        <button (click)="onSave(result); $event.preventDefault(); $event.stopPropagation()" title="Save result" class="absolute top-0 right-0 p-1 rounded-full text-[rgb(var(--color-text-subtle))] hover:bg-[rgb(var(--color-surface-hover))] hover:text-[rgb(var(--color-accent-text))] opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-3.13L5 18V4z" />
          </svg>
        </button>
      </div>
    } @empty {
      <div class="text-center py-8 text-[rgb(var(--color-text-subtle))]">No results found.</div>
    }
  </div>
} @else {
  <div class="h-full flex flex-col items-center justify-center text-center text-[rgb(var(--color-text-subtle))] p-4">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
      <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
    </svg>
    <p class="mt-2 font-semibold">No results found</p>
    <p>Enter a query to search the web.</p>
  </div>
}
